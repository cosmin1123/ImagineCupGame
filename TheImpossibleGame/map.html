<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>The Impossible Game</title>
  </head>

  <body style="background-color:black;margin:0">
    
    <canvas id="canvasBackground" 
   style="position: absolute; left: 0; top: 0; z-index: 0;
   background-color:black;display:block">
   </canvas>

    <canvas id="canvasForeground" 
   style="position: absolute; left: 0; top: 0; z-index: 0;display:block">
   </canvas>
    <img src="images/fireball.png" id = "obstacle" style="display:none"/>
    <img src="images/shuriken.png" id = "obstacle2" style="display:none"/>
    <img src="images/brick_wall.png" id = "wall" style="display:none"/>
    <img src="images/cake.png" id ="cake" style="display:none"/>
    <img src="images/player2.png" id = "player2" style="display:none"/>
   
    <img src="images/player2_set.png" id = "player" style="display:none"/>
    <img src="images/map.png" id ="map" style="display:none" />
   
      
    <script src="js/utils.js"></script>
    <script src="./js/classes/player.js"></script>
    <script src="./js/classes/enemy.js"></script>
    <script src="./js/classes/wall.js"></script>
    <script src="./js/classes/drawWall.js"></script>
    <script src="./js/classes/map.js"></script>
    <script src="socket.io.js"></script>
        
     <script>
         "use strict";
         var isRight = false;
         var isLeft = false;
         var isUp = false;
         var isDown = false;
         var canvasForeground = document.getElementById('canvasForeground');
         var canvasBackground = document.getElementById('canvasBackground');
         var contextForeground = canvasForeground.getContext('2d');
         var contextBackground = canvasBackground.getContext('2d');
         var player;
         var enemy;
         var scalePercentageX = window.innerWidth / 1600;
         var scalePercentageY = window.innerHeight / 900;
         var onLoad = function () {
             canvasBackground.width = 1600 * scalePercentageX;
             canvasBackground.height = 900 * scalePercentageY;
             canvasForeground.width = 1600 * scalePercentageX;
             canvasForeground.height = 900 * scalePercentageY;

             contextBackground.drawImage(map, 0, 0, canvasBackground.width, canvasBackground.height);






             player = new Player("player", 80, 80, 50, 50);
           

             window.addEventListener('keydown', function (event) {
                 if (event.keyCode == 39) {
                     isRight = true;
                 }
                 if (event.keyCode == 37) {
                     isLeft = true;
                 }
                 if (event.keyCode == 38) {
                     isUp = true;
                 }
                 if (event.keyCode == 40) {
                     isDown = true;
                 }
             }
            , false);

             window.addEventListener('keyup', function (event) {
                 if (event.keyCode == 39) {
                     isRight = false;
                 }
                 if (event.keyCode == 37) {
                     isLeft = false;
                 }
                 if (event.keyCode == 38) {
                     isUp = false;
                 }
                 if (event.keyCode == 40) {
                     isDown = false;
                 }

             }, false);

             

             (function drawFrame() {

                 window.requestAnimationFrame(drawFrame, canvasForeground);

                 contextForeground.save()

                 contextForeground.clearRect(0, 0,canvasForeground.width, canvasForeground.height);

                 contextForeground.restore();
                 player.move();

             }());
         };

         window.onload = onLoad();

      

    </script>
  </body>
</html>

